import{V as g,m as n,s as a,g as E,h as s,c as r,l as F,a as S,b as k,d as p}from"./assets/validator-CLf5o44v.js";import{e as t,c,r as y,g as N}from"./assets/recaptcha-BkbUZVkf.js";class w extends g{validate(){return this.resetErrors(),this.validateField("fullname",this.validateName,n.invalidName),this.validateField("email",this.validateEmail,n.invalidEmail),this.validateField("clinic"),this.validateField("reason"),this.validateCheckbox("agreement",n.termsNotAccepted),Object.keys(this.errors).length===0}}function L(){const i=a.htmlElement(t.form.clinician.id);if(!i||i.dataset.initialized==="true")return;if(i.dataset.initialized="true",E(c.keys.clinicianFormSubmitted)){s(i);return}const o=async m=>{m.preventDefault();const e=a.htmlElement(t.form.submit);if(!e||e.disabled)return;const d=e.value;try{if(e.disabled=!0,e.value=e.dataset.wait||"Submitting...",e.classList.add(r.button.loading),!new w(i).validate())return;const u=await y.validate(),v=a.htmlElement(t.form.clinician.name),h=a.htmlElement(t.form.clinician.email),f=a.htmlElement(t.form.clinician.clinic),b=a.htmlElement(t.form.clinician.reason);await F.createClinicianLead({fullName:v.value,email:h.value,clinicName:f.value,marketingSource:parseInt(b.value,10),hasAcceptedTermsAndPrivacy:!0,recaptchaToken:u}),S(c.keys.clinicianFormSubmitted,!0),N.trackEvent("new_leads","New clinician lead submitted","Book"),s(i)}catch(l){console.error("Error creating clinician lead:",l),k()}finally{e.value=d,e.classList.remove(r.button.loading),setTimeout(()=>{e.disabled=!1},1e3)}};i.addEventListener("submit",o)}function A(){p(),L()}document.addEventListener("DOMContentLoaded",A);
